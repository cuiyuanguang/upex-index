<!DOCTYPE HTML>
<html lang="ar">

<head>
  <title>UPEX</title>
  @@include('header.html')
  <link rel="stylesheet" href="../styles/pay.css?rev=@@hash">
</head>

<body>
  <div id="app" v-cloak>
    <o-header ref="header"></o-header>
    <div v-if="step < 4" class="wrapper" style="margin-bottom: 70px;margin-top:30px;" v-show="orderInfo.sequence">
      <div class="pay">
        <div class="pay-header">
            <h3 v-if="step==1">
              {{ $t('payToSeller') }}
              <span class="orange">&nbsp;{{orderInfo.totalPrice}} SAR</span>
            </h3>
            <h3 v-if="step==2">
              {{ $t('waitForSellerConfirm') }}
            </h3>
            <h3 v-if="step==3">
              <span>
                {{ $t('transactionSuccessful') }} - {{ $t('received') }}
                <span style="color:#0CBF48"> {{orderInfo.volume}} USDT</span>
              </span>
            </h3>
            <div class="step-wrapper">
              <Steps :current="step">
                <Step :content="$t('orderSuccess')"></Step>
                <Step :content="$t('payAndConfirm')"></Step>
                <Step :content="$t('receiveAndConfirm')"></Step>
                <Step :content="$t('USDTArrival')"></Step>
              </Steps>
            </div>
        </div>
        <div class="pay-info">
          <Row>
            <i-col span="10">
              <div class="info-header">{{ $t('orderInfo') }}</div>
                <ul v-if="step < 3" class="pay-box-left">
                  <li class="info-items">
                    <Row>
                      <i-col span="8" class="info-key">{{ $t('orderNo') }} :</i-col>
                      <i-col span="16" class="info-value">{{orderInfo.sequence}}</i-col>
                    </Row>
                  </li>
                  <li class="info-items">
                    <Row>
                      <i-col span="8" class="info-key">{{ $t('totalPurchase') }} :</i-col>
                      <i-col span="16" class="info-value">{{orderInfo.volume}} USDT</i-col>
                    </Row>
                  </li>
                  <li class="info-items">
                    <Row>
                      <i-col span="8" class="info-key">{{ $t('totalPrice') }} :</i-col>
                      <i-col span="16" class="info-value">{{orderInfo.totalPrice}} SAR</i-col>
                    </Row>
                  </li>
                </ul>
                <ul v-if="step==3" class="pay-box-left">
                  <li class="info-items">
                    <Row>
                      <i-col span="6" class="info-key">{{ $t('orderNo') }} :</i-col>
                      <i-col span="18" class="info-value">{{orderInfo.sequence}}</i-col>
                    </Row>
                  </li>
                  <li class="info-items">
                    <Row>
                      <i-col span="6" class=" info-key">{{ $t('received') }} :</i-col>
                      <i-col span="18" style="color: #0CBF48" class="info-value">{{orderInfo.volume}} USDT</i-col>
                    </Row>
                  </li>
                  <li class="info-items">
                    <Row>
                      <i-col span="6" class="info-key">{{ $t('paid') }} :</i-col>
                      <i-col span="18" style="color: #0CBF48" class="info-value">{{orderInfo.totalPrice}} SAR</i-col>
                    </Row>
                  </li>
                  <li class="info-items">
                    <Row>
                      <i-col span="6" class="info-key">{{ $t('timeOfArrival') }} :</i-col>
                      <i-col span="18" class="info-value">{{ arrivalTime }}</i-col>
                    </Row>
                  </li>

                </ul>
            </i-col>
            <i-col span="14">
              <div class="info-header">{{ $t('sellerInfo') }}</div>
              <div class="pay-box-right">
                <ul class="bankcard">
                  <li v-for="(item, index) in orderInfo.paymentBanks">
                    <Row>
                      <i-col span="6" class="info-key">
                        {{ $t('bank') }}
                      </i-col>
                      <i-col span="15" class="info-value">{{item.bankName}}</i-col>
                    </Row>
                    <Row>
                      <i-col span="6" class="info-key">
                        {{ $t('cardNo') }}
                      </i-col>
                      <i-col span="15" class="info-value">{{item.cardNo}}</i-col>
                    </Row>
                    <Row>
                      <i-col span="6" class="info-key">
                        {{ $t('accountName') }} :
                      </i-col>
                      <i-col span="15" class="info-value">{{item.name}}</i-col>
                    </Row>
                    <Row>
                      <i-col span="6" class="info-key">
                        Iban {{ $t('iBanNo') }}
                      </i-col>
                      <i-col span="15" class="info-value">{{item.ibanNo}}</i-col>
                    </Row>
                  </li>
                  <li>
                    <Row>
                      <i-col span="6">
                        <img src="../images/pay_phone.png" class="pay-image">
                        {{ $t('phone') }}
                      </i-col>
                      <i-col span="15" class="info-value">
                        {{orderInfo.seller.hideMobileNumber}}
                      </i-col>
                    </Row>
                    <Row>
                      <i-col span="6">
                        <img src="../images/pay_whatsapp.png" class="pay-image">
                        Whatsapp
                      </i-col>
                      <i-col span="15" class="info-value">
                        <!--<input type="text" name="Social Number" readonly class="input-copy" :value="orderInfo.seller.userExtView.watchapp" @click="copy($event)">-->
                        <a class="contact" :href="'https://api.whatsapp.com/send?phone='+whatsAppLink" target="_blank">
                          <img class="whatup" src="../images/whatup-white.png" />{{ $t('contactSeller') }}</a>
                      </i-col>
                    </Row>
                  </li>
                </ul>
              </div>

            </i-col>
          </Row>
        </div>
        <div class="pay-status" v-if="step < 2">
          <p class="pay-notice">
            {{ $t('payInTime') }}
            <span class="text-error">{{leftTime}}</span>
          </p>
          <div class="pay-action">
            <button @click="toPay" class="pay-action-btn">{{ $t('iPaid') }}</button>
            <span class="pay-action-tips">
              <span class="triangle"></span>
              {{ $t('iPaidTips') }}</span>
          </div>
          <i-button type="text" size="large" class="cancel-order" @click.native="cancelPay">{{ $t('cancelOrder') }}</i-button>
        </div>
        <div class="pay-status" v-if="step==2">
          <p class="pay-notice" v-if="limitTime != 0">
            {{ $t('sellerNotConfirmIn') }}<span class="text-success">{{ (confirmLimit / 60).toFixed(2) }}</span> {{ $t('hour') }}<br>
            {{ $t('restTime') }}<span class="text-success">{{leftTime}}</span>
          </p>
          <p class="pay-notice" v-else>
            <span class="text-error"> {{ $t('orderExpired') }}</span>
          </p>
        </div>
        <div class="pay-status" v-if="step==3">
          <p class="pay-notice text-success">{{ $t('tradeDone') }}</p>
          <p class="pay-tips">
            <a href="otc_adverts.html">{{ $t('backToHome') }}</a>
          </p>
        </div>
        <div class="pay-status" v-if="step < 3">
          <p class="pay-tips">
            1. {{ $t('helpTipsFirst') }}<br>
            2. {{ $t('helpTipsSecond') }}<br>
            3. {{ $t('helpTipsThird') }}<br>
            4. {{ $t('helpTipsFourth') }}
          </p>
        </div>
      </div>
    </div>
    <!--订单超时显示-->
    <div v-if="step==4 || step==7" class="wrapper">
      <div class="expired">
        <h2 style="color:red;">{{ step == 4 ? $t('orderCanceledTips') : $t('orderExpiredTips') }}</h2>
        <ul>
          <li>
            <span>{{ $t('reasonForFailure') }} :</span>
            <span v-if="step == 4">{{ $t('orderCanceled') }}</span>
            <span v-if="step == 7">{{ orderInfo.paymentTime ? $t('outOfTimeToConfirm') : $t('outOfTimeToPay') }}</span>
          </li>
          <li>
            <span>{{ $t('orderNo') }} :</span>
            <span>{{ orderInfo.sequence }}</span>
          </li>
          <li>
            <span>{{ $t('totalPurchase') }} :</span>
            <span>{{ orderInfo.volume }} USDT</span>
          </li>
          <li>
            <span>{{ $t('totalPrice') }} :</span>
            <span>{{ orderInfo.totalPrice }} SAR</span>
          </li>
        </ul>
        <p>{{ $t('paidAndClick') }}
          <a href="#" class="text-error">{{ $t('appeal') }}</a>
        </p>
        <div class="return">
          <a href="otc_adverts.html">{{ $t('backToHome') }}</a>
        </div>
      </div>
    </div>
    <!--订单超时END-->
    <Modal :title="$t('hasPaid')" v-model="isPayDialogShow" :mask-closable="false">
      <p>{{ $t('notPayWarn') }}</p>
      <div slot="footer">
        <i-button type="link" @click="isPayDialogShow = false">{{ $t('cancel') }}</i-button>
        <i-button type="primary" @click="paid">{{ $t('alreadyPaid') }}</i-button>
      </div>
    </Modal>
    <!--支付信息Modal-->
    <Modal :title="$t('myTransferInfo')" v-model="isPayInfoDialogShow" :mask-closable="false" class="pay-info-modal">
      <div class="p-i-content">
        <ul>
          <li>
            <label>{{ $t('lastFourNumber') }}</label>
            <i-input type="text" maxlength="4"
                     @on-focus="cardFocus"
                     v-model="card" :class="cardErrorTips?'is-red':'is-grey'"></i-input>
            <p class="error">{{ cardErrorTips }}</p>
          </li>
          <li>
            <label>{{ $t('lastFourNumber') }}</label>
            <i-input type="text" maxlength="4"
                     @on-focus="recardFocus"
                     v-model="recard" :class="recardErrorTips?'is-red':'is-grey'"></i-input>
            <p class="error">{{ recardErrorTips }}</p>
          </li>
        </ul>
      </div>
      <div slot="footer">
        <i-button @click="confirm" type="primary" class="confirm" long>{{ $t('confirm') }}</i-button>
        <p class="tips"> {{ $t('transferTips') }} </p>
      </div>
    </Modal>
    <!--<div class="o-modal pay-info-modal" :class="isPayInfoDialogShow? 'is-show': 'is-not-show'">-->
      <!--<div class="content">-->
        <!--<div class="content-wrapper" style="width:500px; height: 424px ;">-->
          <!--<div class="p-i-header">-->
            <!--{{ $t('myTransferInfo') }}-->
            <!--<Icon @click="close" type="close" class="close"></Icon>-->
          <!--</div>-->

          <!--<div class="p-i-content">-->
            <!--<ul>-->
              <!--<li style="margin-top: 30px;">-->
                <!--<label>{{ $t('lastFourNumber') }}</label>-->
                <!--<i-input type="text" maxlength="4"-->
                         <!--@on-focus="cardFocus"-->
                         <!--v-model="card" :class="cardErrorTips?'is-red':'is-grey'"></i-input>-->
                  <!--<p class="error">{{ cardErrorTips }}</p>-->
              <!--</li>-->
              <!--<li>-->
                <!--<label>{{ $t('lastFourNumber') }}</label>-->
                <!--<i-input type="text" maxlength="4"-->
                         <!--@on-focus="recardFocus"-->
                         <!--v-model="recard" :class="recardErrorTips?'is-red':'is-grey'"></i-input>-->
                <!--<p class="error">{{ recardErrorTips }}</p>-->
              <!--</li>-->
              <!--<li style="margin-bottom: 12px;">-->
                <!--<button @click="confirm" class="confirm">{{ $t('confirm') }}</button>-->
              <!--</li>-->
              <!--<li style="margin: 0;color: #999">-->
                <!--<p> {{ $t('transferTips') }} </p>-->
                <!--<p class="error" v-if="infoError">{{ infoError }}</p>-->
              <!--</li>-->
            <!--</ul>-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  </div>
  @@include('footer.html')
  <script src="../scripts/locale/pay.js?rev=@@hash"></script>
  <script src="../scripts/pay.js?rev=@@hash"></script>
</body>

</html>
